<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>科學計算機及數學程式 Scientific Calculator and Mathematical Programs</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <!-- 主選單 Menu -->
        <div id="main-menu" class="page active">
            <h1 class="app-title">科學計算機及數學程式 Scientific Calculator and Mathematical Programs</h1>
            <div class="menu-buttons">
                <button class="btn btn--primary menu-btn" onclick="showPage('quadratic')">
                    <div class="btn-content">
                        <span class="btn-symbol">x²</span>
                        <span class="btn-title">二次方程求解器 Quadratic Equation Solver</span>
                        <span class="btn-subtitle">因式分解功能 Factorization</span>
                    </div>
                </button>
                <button class="btn btn--primary menu-btn" onclick="showPage('linear')">
                    <div class="btn-content">
                        <span class="btn-symbol">{x,y}</span>
                        <span class="btn-title">聯立方程求解器 Simultaneous Equation Solver</span>
                        <span class="btn-subtitle">支援分數及小數輸入 Support fraction and decimal number</span>
                    </div>
                </button>
                <button class="btn btn--primary menu-btn" onclick="showPage('radical')">
                    <div class="btn-content">
                        <span class="btn-symbol">√</span>
                        <span class="btn-title">根式化簡 Surd simplication</span>
                        <span class="btn-subtitle">√n</span>
                    </div>
                </button>
                <button class="btn btn--primary menu-btn" onclick="showPage('scientific')">
                    <div class="btn-content">
                        <span class="btn-symbol">sin</span>
                        <span class="btn-title">科學計算機 Scientific Calculator</span>
                        <span class="btn-subtitle">具分數顯示功能 Support fraction display</span>
                    </div>
                </button>
                <button class="btn btn--primary menu-btn" onclick="showPage('cubic')">
                    <div class="btn-content">
                        <span class="btn-symbol">x³</span>
                        <span class="btn-title">三次方程求解器 Cubic Equation Solver</span>
                        <span class="btn-subtitle">因式分解功能 Factorization</span>
                    </div>
                </button>
                <button class="btn btn--primary menu-btn" onclick="showPage('polynomial')">
                    <div class="btn-content">
                        <span class="btn-symbol">(xy)</span>
                        <span class="btn-title">多項式展開 Polynomial Expansion</span>
                        <span class="btn-subtitle">e.g. (2)(x+1),(x+1)(x+1),(x+1)(x+2),etc</span>
                    </div>
                </button>
            </div>
        </div>

        <!-- 二次方程求解器 Quadratic Equation Solver -->
        <div id="quadratic" class="page">
            <div class="page-header">
                <button class="btn btn--outline back-btn" onclick="showPage('main-menu')">← 返回主選單 Return to Menu</button>
                <h2>二次方程求解器 Quadratic Equation Solver</h2>
            </div>

            <div class="equation-display">
                <span class="equation">ax² + bx + c = 0</span>
            </div>

            <div class="input-section">
                <div class="form-group">
                    <label class="form-label">係數 a（不能為 0）</label>
                    <input type="number" id="quad-a" class="form-control" step="any" required>
                </div>
                <div class="form-group">
                    <label class="form-label">係數 b</label>
                    <input type="number" id="quad-b" class="form-control" step="any" required>
                </div>
                <div class="form-group">
                    <label class="form-label">係數 c</label>
                    <input type="number" id="quad-c" class="form-control" step="any" required>
                </div>
                <button class="btn btn--primary btn--full-width" onclick="solveQuadraticEnhanced()">計算</button>
            </div>

            <div id="quad-result" class="result-section hidden">
                <h3>計算結果</h3>
                <div id="quad-output"></div>
            </div>
        </div>

        <!-- 聯立方程求解器 Simultaneous Equation Solver-->
        <div id="linear" class="page">
            <div class="page-header">
                <button class="btn btn--outline back-btn" onclick="showPage('main-menu')">← 返回主選單 Return to Menu</button>
                <h2>聯立方程求解器 Simultaneous Equation Solver</h2>
            </div>

            <div class="equation-display">
                <div class="equation">ax + by + c = 0</div>
                <div class="equation">dx + ey + f = 0</div>
            </div>

            <div class="fraction-hint">
                <div class="hint-text">💡 可輸入分數，如 1/2、-3/4 或小數 0.5</div>
            </div>

            <div class="input-section">
                <div class="equation-inputs">
                    <h4>第一個方程：ax + by + c = 0</h4>
                    <div class="input-row">
                        <div class="form-group">
                            <label class="form-label">a</label>
                            <input type="text" id="linear-a" class="form-control fraction-input" placeholder="如: 1/2"
                                required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">b</label>
                            <input type="text" id="linear-b" class="form-control fraction-input" placeholder="如: -3/4"
                                required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">c</label>
                            <input type="text" id="linear-c" class="form-control fraction-input" placeholder="如: 0.5"
                                required>
                        </div>
                    </div>
                </div>

                <div class="equation-inputs">
                    <h4>第二個方程：dx + ey + f = 0</h4>
                    <div class="input-row">
                        <div class="form-group">
                            <label class="form-label">d</label>
                            <input type="text" id="linear-d" class="form-control fraction-input" placeholder="如: 2"
                                required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">e</label>
                            <input type="text" id="linear-e" class="form-control fraction-input" placeholder="如: 1/3"
                                required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">f</label>
                            <input type="text" id="linear-f" class="form-control fraction-input" placeholder="如: -1"
                                required>
                        </div>
                    </div>
                </div>

                <button class="btn btn--primary btn--full-width" onclick="solveLinear()">計算</button>
            </div>

            <div id="linear-result" class="result-section hidden">
                <h3>計算結果</h3>
                <div id="linear-output"></div>
            </div>
        </div>

        <!-- 根號化簡器 Surd Simplifier-->
        <div id="radical" class="page">
            <div class="page-header">
                <button class="btn btn--outline back-btn" onclick="showPage('main-menu')">← 返回主選單 Return to Menu</button>
                <h2>根號化簡器 Surd Simplifier</h2>
            </div>

            <div class="equation-display">
                <span class="equation">√n</span>
            </div>

            <div class="input-section">
                <div class="form-group">
                    <label class="form-label">輸入數字 n（正整數）</label>
                    <input type="number" id="radical-n" class="form-control" min="1" step="1" required>
                </div>
                <button class="btn btn--primary btn--full-width" onclick="simplifyRadical()">計算</button>
            </div>

            <div id="radical-result" class="result-section hidden">
                <h3>計算結果</h3>
                <div id="radical-output"></div>
            </div>
        </div>


        <!--testing delete 1 here-->

        <!-- 科學計算機 Scientific Calculator-->
        <div id="scientific" class="page">
            <div class="page-header">
                <button class="btn btn--outline back-btn" onclick="showPage('main-menu')">← 返回主選單 Return to Menu</button>
                <h2>科學計算機 Scientific Calculator</h2>
            </div>

            <div class="calculator">

                <div class="calculator-buttons">
                    <!-- 第一行：清除和退格 -->
                    <button class="btn btn--outline calc-btn" onclick="clearCalculator()">AC</button>
                    <button class="btn btn--outline calc-btn" onclick="backspaceAtCursor()">←</button>
                    <button class="btn btn--outline calc-btn" onclick="insertAtCursor('(')">(</button>
                    <button class="btn btn--outline calc-btn" onclick="insertAtCursor(')')">)</button>

                    <!-- 第二行：三角函數 -->
                    <button class="btn btn--secondary calc-btn" onclick="insertAtCursor('sin(')">sin</button>
                    <button class="btn btn--secondary calc-btn" onclick="insertAtCursor('cos(')">cos</button>
                    <button class="btn btn--secondary calc-btn" onclick="insertAtCursor('tan(')">tan</button>
                    <button class="btn btn--primary calc-btn" onclick="insertAtCursor('/')">/</button>

                    <!-- 第三行：反三角函數 -->
                    <button class="btn btn--secondary calc-btn" onclick="insertAtCursor('asin(')">asin</button>
                    <button class="btn btn--secondary calc-btn" onclick="insertAtCursor('acos(')">acos</button>
                    <button class="btn btn--secondary calc-btn" onclick="insertAtCursor('atan(')">atan</button>
                    <button class="btn btn--primary calc-btn" onclick="insertAtCursor('*')">×</button>

                    <!-- 第四行：對數和指數 -->
                    <button class="btn btn--secondary calc-btn" onclick="insertAtCursor('log(')">log</button>
                    <button class="btn btn--secondary calc-btn" onclick="insertAtCursor('ln(')">ln</button>
                    <button class="btn btn--secondary calc-btn" onclick="insertAtCursor('exp(')">exp</button>
                    <button class="btn btn--primary calc-btn" onclick="insertAtCursor('-')">-</button>

                    <!-- 第五行：根號和常數 -->
                    <button class="btn btn--secondary calc-btn" onclick="insertAtCursor('sqrt(')">√</button>
                    <button class="btn btn--secondary calc-btn" onclick="insertAtCursor('pi')">π</button>
                    <button class="btn btn--secondary calc-btn" onclick="insertAtCursor('e')">e</button>
                    <button class="btn btn--primary calc-btn" onclick="insertAtCursor('+')">+</button>

                    <!-- 數字按鈕 -->
                    <button class="btn btn--outline calc-btn" onclick="insertAtCursor('7')">7</button>
                    <button class="btn btn--outline calc-btn" onclick="insertAtCursor('8')">8</button>
                    <button class="btn btn--outline calc-btn" onclick="insertAtCursor('9')">9</button>
                    <button class="btn btn--secondary calc-btn" onclick="insertAtCursor('^')">x^y</button>

                    <button class="btn btn--outline calc-btn" onclick="insertAtCursor('4')">4</button>
                    <button class="btn btn--outline calc-btn" onclick="insertAtCursor('5')">5</button>
                    <button class="btn btn--outline calc-btn" onclick="insertAtCursor('6')">6</button>
                    <button class="btn btn--primary calc-btn equals-btn" onclick="calculateResult()"
                        rowspan="2">=</button>

                    <button class="btn btn--outline calc-btn" onclick="insertAtCursor('1')">1</button>
                    <button class="btn btn--outline calc-btn" onclick="insertAtCursor('2')">2</button>
                    <button class="btn btn--outline calc-btn" onclick="insertAtCursor('3')">3</button>

                    <button class="btn btn--outline calc-btn zero-btn" onclick="insertAtCursor('0')">0</button>
                    <button class="btn btn--outline calc-btn" onclick="insertAtCursor('.')">.</button>
                </div>

                <div class="calculator-display">
                    <input type="text" id="calc-display" class="display-input" placeholder="輸入數學表達式...">
                    <div class="angle-mode">
                        <button id="angle-mode-btn" class="btn btn--secondary btn--sm"
                            onclick="toggleAngleMode()">DEG</button>
                    </div>
                    <div class="edit-hint">
                        <span class="hint-text">💡 只對有理數結果顯示分數形式 Display of fraction is only applicable to rational number</span>
                    </div>
                </div>
                
                <div id="calc-result" class="calculator-result hidden">
                    <div class="result-label">計算結果</div>
                    <div id="calc-output" class="result-value"></div>
                </div>
            </div>
        </div>



        <!-- 三次方程求解器 -->
        <div id="cubic" class="page">
            <div class="page-header">
                <button class="btn btn--outline back-btn" onclick="showPage('main-menu')">← 返回主選單 Return to Menu</button>
                <h2>三次方程求解器</h2>
            </div>

            <div class="equation-display">
                <span class="equation">ax³ + bx² + cx + d = 0</span>
            </div>

            <div class="input-section">
                <div class="input-grid cubic-grid">
                    <div class="form-group">
                        <label class="form-label">係數 a（不能為 0）</label>
                        <input type="number" id="cubic-a" class="form-control" step="any" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">係數 b</label>
                        <input type="number" id="cubic-b" class="form-control" step="any" value="0"
                            placeholder="可選，預設為 0">
                    </div>
                    <div class="form-group">
                        <label class="form-label">係數 c</label>
                        <input type="number" id="cubic-c" class="form-control" step="any" value="0"
                            placeholder="可選，預設為 0">
                    </div>
                    <div class="form-group">
                        <label class="form-label">係數 d</label>
                        <input type="number" id="cubic-d" class="form-control" step="any" value="0"
                            placeholder="可選，預設為 0">
                    </div>
                </div>
                <button class="btn btn--primary btn--full-width" onclick="solveCubicEnhanced()">計算</button>
            </div>

            <div id="cubic-result" class="result-section hidden">
                <h3>計算結果</h3>
                <div id="cubic-output"></div>
            </div>
        </div>

        <!-- 多項式展開器 -->
        <div id="polynomial" class="page">
            <div class="page-header">
                <button class="btn btn--outline back-btn" onclick="showPage('main-menu')">← 返回主選單 Return to Menu</button>
                <h2>多項式展開器</h2>
            </div>

            <div class="input-section">
                <div class="form-group">
                    <label class="form-label">輸入多項式表達式</label>
                    <input type="text" id="poly-input" class="form-control poly-input"
                        placeholder="如：(2)(x+1) 或 (x+y)(x+k) 或 (a+b)(a+b) 或 (a+b)(a+b)(a+b)">
                    <!--<div class="input-hint">
                        <strong>已修正功能：</strong><br>
                        • ✅ 正確解析表達式和隱含乘號<br>
                        • ✅ 準確提取因子和處理乘方<br>
                        • ✅ 精確合併同類項<br>
                        • ✅ 標準數學格式化輸出<br>
                        • ✅ 支援複雜多因子展開
                    </div>
                    -->
                </div>

                <!--<div class="examples-section">
                    <h4>測試範例</h4>
                    <div class="example-buttons">
                        <button class="btn btn--outline example-btn"
                            onclick="insertPolynomialExample('(x+1)(x+2)')">(x+1)(x+2)</button>
                        <button class="btn btn--outline example-btn"
                            onclick="insertPolynomialExample('(x+y)(x+k)')">(x+y)(x+k)</button>
                        <button class="btn btn--outline example-btn"
                            onclick="insertPolynomialExample('(2x+3)(x-1)')">(2x+3)(x-1)</button>
                        <button class="btn btn--outline example-btn"
                            onclick="insertPolynomialExample('(x+1)(x+2)(x+3)')">(x+1)(x+2)(x+3)</button>
                        <button class="btn btn--outline example-btn"
                            onclick="insertPolynomialExample('(a+b)^2')">(a+b)^2</button>
                        <button class="btn btn--outline example-btn"
                            onclick="insertPolynomialExample('(x+y)(x-y)')">(x+y)(x-y)</button>
                    </div>
                </div>
                -->

                <!--<div class="test-section">
                    <button class="btn btn--secondary btn--full-width" onclick="runPolynomialTests()">🧪 執行自動測試</button>
                </div>
                -->

                <button class="btn btn--primary btn--full-width" onclick="expandAdvancedPolynomialFixed()">展開</button>
            </div>

            <div id="poly-result" class="result-section hidden">
                <h3>展開結果</h3>
                <div id="poly-output"></div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>
